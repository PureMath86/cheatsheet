{% extends "layout.html" %}

{% block jumbotron %}
<div class="jumbotron">
   <h1>Ruby Cheat Sheet</h1>
   <p>Cheat sheet of Ruby. Some basic concepts for a newbie Ruby programmer need to know.</p>
</div>
{% endblock %}

{% block body %}
<div class="row col-md-4 col-xs-12">

<h3>Ruby Indentation</h3>
<pre class="code ruby">
# Use two spaces per indentation level
# ref: <a href="https://github.com/bbatsov/ruby-style-guide">ruby-style-guide</a>
def spam_method
  puts "spam"
end
</pre>

<h3>Ruby Naming Styles</h3>
<pre class="code ruby">
# constant: SCREAMING_SNAKE_CASE 
SOME_CONST = 9527

# variable: snake_case
this_is_var

# methods: snake_case
def spam_method
  puts "spam"
end

# class: CamleCase
class CamleCase
  def spam_method
    puts "sapm" 
  end
end

# file: snake_case
ruby_test.rb

# directory: snake_case
ruby_pkg/ruby_test.rb
</pre>

<h3>Ruby Comments</h3>
<pre class="code ruby">
# donnot use block comment
# bad
=begin
- Hello
- World
=end

# good
# - Hello
# - World
</pre>

<h3>Ruby use ";"</h3>
<pre class="code ruby">
# donnot use ";" between two exp
# bad
puts "Hello"; puts "World"
# good 
puts "Hello"
puts "World"

# prefer use ";" with nobody
def spam_method; end
</pre>

<h3>if ... else Statement</h3>
<pre class="code ruby">
if true
  puts "Hello"
else
  puts "World"
end

# one line statement
puts "true" if true
</pre>

<h3>unless ... else Statement</h3>
<pre class="code ruby">
unless true
  puts "Hello"
else
  puts "World"
end

# same as 
if not true
  puts "Hello"
else
  puts "World"
end

# one line statement
&gt;&gt; puts "Hello" unless false
Hello
=&gt; nil
</pre>

<h3>case ... when Statement</h3>
<pre class="code ruby">
&gt;&gt; a = 'hello'
=&gt; "hello"
&gt;&gt; case a
.. when 'hello'
..   print 'hello'
.. else
..   print 'world'
.. end
hello=&gt; nil

# case statement with range
&gt;&gt; a = 5566
=&gt; 5566
&gt;&gt; case a
.. when 0 .. 5
..   print 'hello'
.. else 
..   print 'world'
.. end
world=&gt; nil
</pre>
</div>

<div class="row col-md-4 col-xs-12">

<h3>Range in Ruby</h3>
<pre class="code ruby">
# (0..3) =&gt; [0, 1, 2, 3]
# (0...3) =&gt; [0, 1, 2]
&gt;&gt; a = (1..5).to_a
=&gt; [1, 2, 3, 4, 5]
&gt;&gt; a = (0...3).to_a
=&gt; [0, 1, 2]
&gt;&gt; a = ('a'..'d').to_a
=&gt; ["a", "b", "c", "d"]

# "in statement" in ruby 
# for Array
&gt;&gt; a = (1..5).to_a
=&gt; [1, 2, 3, 4, 5]
&gt;&gt; a.class
=&gt; Array
&gt;&gt; a.include?3
=&gt; true

# for Range 
&gt;&gt; a = 1..5
=&gt; 1..5
&gt;&gt; a.class
=&gt; Range
&gt;&gt; a.include?3
=&gt; true
# test 3 in (1..5) via "==="
&gt;&gt; print true if (1..5) === 3
true=&gt; nil

# traverse "Range"
&gt; a.each do |i|
..   print i, ' '
.. end
1 2 3 4 5 =&gt; 1..5
</pre>

<h3>Some Array Operations</h3>
<pre class="code ruby">
# gen some len of array
&gt;&gt; a = [0]*5
=&gt; [0, 0, 0, 0, 0]

# gen array from range
&gt;&gt; a = (1..5).to_a
=&gt; [1, 2, 3, 4, 5]

# push item to an array
&gt;&gt; (1..3).each do |i|
..   a.push(i**2)
.. end
=&gt; 1..3
&gt;&gt; a
=&gt; [1, 4, 9]

# check array empty
&gt;&gt; a.empty?
=&gt; true

# get items from array
&gt;&gt; a = (1..5) .map {|i| i*2}
=&gt; [2, 4, 6, 8, 10]
&gt;&gt; a[1..3]
=&gt; [4, 6, 8]
&gt;&gt; len = a.length
=&gt; 5
&gt;&gt; (1..len-1).step(2).map {|i| a[i]}
=&gt; [4, 8]
</pre>

<h3>Some Hash Operations</h3>
<pre class="code ruby">
# basic assign val to hash
&gt;&gt; a = {'1'=&gt;1,'2'=&gt;2}
=&gt; {"1"=&gt;1, "2"=&gt;2}
&gt;&gt; a['3'] = 3
=&gt; 3
</pre>

<h3>while Statement</h3>
<pre class="code ruby">
&gt;&gt; while i &lt; 3
..   i += 1
..   puts i
.. end
1
2
3
=&gt; nil

# ruby do while statement
&gt;&gt; i = 0
=&gt; 0
&gt;&gt; begin
..   puts i
..   i += 1
.. end while i &lt; 3
0
1
2
=&gt; nil
</pre>

<h3>until Statement</h3>
<pre class="code ruby">
&gt;&gt; i = 3
=&gt; 3
&gt;&gt; until i &lt; 0
..   print i, ' '
..   i -= 1
.. end
3 2 1 0 =&lt; nil

# equal to
&gt;&gt; i = 3
=&gt; 3
&gt;&gt; while not i &lt; 0
..   print i, ' '
..   i -= 1
.. end
3 2 1 0 =&gt; nil

# begin ... until statement
&gt;&gt; i = 3
=&gt; 3
&gt;&gt; begin
..   print i, ' '
..   i -= 1
.. end until i &lt; 0
3 2 1 0 =&gt; nil
</pre>

<h3>for loop</h3>
<pre class="code ruby">
# using each
&gt;&gt; (0...5).each do |i|
..   print "#{i} "
.. end
0 1 2 3 4 =&gt;&gt; 0...5

# for loop
&gt;&gt; for i in 0..3
..   print "#{i} "
.. end
0 1 2 3 =&gt; 0..3
</pre>

<h3>break Statement</h3>
<pre class="code ruby">
&gt;&gt; for i in 0..3
..   if i &gt; 1
..     break
..   end
..   print "#{i} "
.. end
0 1 =&gt; nil
</pre>

<h3>next Statement</h3>
<pre class="code ruby">
# just like c - continue
&gt;&gt; for i in 0..3
..   if i &lt; 2
..     next
..   end
..   print "#{i} "
.. end
2 3 =&gt; 0..3
</pre>

<h3>redo Statement</h3>
<pre class="code ruby">
# restart loop
&gt;&gt; flag = false
=&gt; false
&gt;&gt; for i in 0..5
..   if i &gt; 3 and flag == false
..     puts 'redo'
..     flag = true
..     redo
..   end
..   print i, ' '
.. end
0 1 2 3 redo
4 5 =&gt; 0..5
</pre>
</div>

<div class="row col-md-4 col-xs-12">

<h3>Methods (Functions)</h3>
<pre class="code ruby">
# no arguments
&gt;&gt; def spam
..   puts "spam"
.. end
=&gt; nil
&gt;&gt; spam
spam
=&gt; nil

# with arguments
&gt;&gt; def spam(a,b)
..   return a+b
.. end
=&gt; nil
&gt;&gt; print spam(1,2)
3=&gt; nil

# with default input
&gt;&gt; def spam(a=3,b=1,c)
..   puts a, b, c
..   return a+b+c
.. end
=&gt; nil
&gt;&gt; ret = spam(2,3)
2
1
3
=&gt; 6
&gt;&gt; ret = spam(5)
3
1
5
=&gt; 9

# variable number of parameters
&gt;&gt; def spam(*args)
..   print args
.. end
=&gt; nil
&gt;&gt; spam(1,2,3,'ker')
[1, 2, 3, "ker"]=&gt; nil
</pre>

<h3>Question Mark "?"</h3>
<pre class="code ruby">
# "?" is valid at the end of a method
# ref: <a href=http://stackoverflow.com/questions/1345843/what-does-the-question-mark-operator-mean-in-ruby>What does "?" mean in Ruby?</a>
&gt;&gt; def spam?
..   return true
.. end
=&gt; nil
&gt;&gt; spam?
=&gt; true
</pre>

<h3 class="code ruby">Ruby Block</h3>
<pre class="code ruby">
# block:
# - chunk of code
# - invoked from a func
# - with same name of invoked func
# - using yield statement
&gt;&gt; def spam
..   puts 'in the function'
..   yield
.. end
=&gt; nil
&gt;&gt; spam {puts 'in the block'}
in the function
in the block
=&gt; nil

# send argument to block
&gt;&gt; def spam
..   puts 'in the function'
..   yield 'Hello World'
.. 
.. ^C
&gt;&gt; def spam
..   puts 'in the function'
..   yield 'Hello World'
.. end
=&gt; nil
&gt;&gt; spam {|i| puts i}
in the function
Hello World
=&gt; nil

# equal to
&gt;&gt; spam {|i| puts i}
in the function
Hello World
=&gt; nil
&gt;&gt; def spam(&block)
..   block.call('Hello World')
.. end
=&gt; nil
&gt;&gt; spam {|i| puts i}
Hello World
=&gt; nil
</pre>

<h3>BEGIN and END block</h3>
<pre class="code ruby">
# run BEGIN block before main
BEGIN {
  puts 'begin ruby script'
}
# run END block after main
END {
  puts 'end ruby script'
}
# main script
puts 'ruby script main'

# bash&gt; ruby ex.rb
# begin ruby script
# ruby script main
# end ruby script
</pre>
</div>
{% endblock %}

{% block script %}
{{ super() }}

{% endblock %}
